[Unit]
Description=High-performance, schema-free document-oriented database
After=network.target
Documentation=https://docs.mongodb.org/manual

[Service]
Type=forking
User={{ mongo_file_owner }}
Group={{ mongo_file_owner }}
LimitFSIZE=infinity
LimitCPU=infinity
LimitAS=infinity
LimitNOFILE=64000
LimitNPROC=64000
LimitMEMLOCK=infinity
TasksMax=infinity
TasksAccounting=false
{{ if mongo_distribution == 'percona' }}
ExecStartPre=/usr/bin/percona-server-mongodb-helper.sh
{{ endif }}
ExecStart=/usr/bin/mongos --config /etc/mongod.conf
PIDFile=/var/run/mongod.pid

[Install]
WantedBy=multi-user.target